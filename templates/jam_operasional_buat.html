{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Jam Operasional: Buat</title>
<script>
    $(document).ready(function() {
        $('#form').submit(function(event) {
            event.preventDefault();
            let hari = $('#hari').val();
            let jamBukaValue = $('#jam_buka').val();
            let jamBuka = jamBukaValue == '' ? null : jamBukaValue;
            let jamTutupValue = $('#jam_tutup').val();
            let jamTutup = jamTutupValue == '' ? null : jamTutupValue;
            if (hari != null && jamBuka != null && jamTutup != null) {
                $.ajax({
                    method: 'POST',
                    url: "",
                    headers: {
                        'X-CSRFToken': '{{csrf_token}}',
                    },
                    data: {
                        hari: hari,
                        jam_buka: jamBuka,
                        jam_tutup: jamTutup,
                    },
                    success: function(data) {
                        window.location = `{% url 'jam_operasional:jam_operasional_daftar' %}`;
                    },
                    error: function(error) {
                        window.location = `{% url 'jam_operasional:jam_operasional_daftar' %}`;
                    }
                });
            } else {
                alert('Data yang diisikan belum lengkap, silakan lengkapi data terlebih dahulu.');
            }
        });
    });
</script>
{% endblock meta %}

{% block content %}
<h1 class="text-center">Form Buat Jam Operasional</h1>
<form id="form">
    <div>
        <label for="hari">Hari:</label>
        <select id="hari" name="hari" placeholder="Pilih Hari">
            <option value="" disabled selected>Pilih Hari</option>
            <option value="Senin">Senin</option>
            <option value="Selasa">Selasa</option>
            <option value="Rabu">Rabu</option>
            <option value="Kamis">Kamis</option>
            <option value="Jumat">Jumat</option>
            <option value="Sabtu">Sabtu</option>
            <option value="Minggu">Minggu</option>
        </select>
    </div>
    <div>
        <label for="jam_buka">Jam buka:</label>
        <input id="jam_buka" type="time" step="1" name="jam_buka">
    </div>
    <div>
        <label for="jam_tutup">Jam tutup:</label>
        <input id="jam_tutup" type="time" step="1" name="jam_tutup">
    </div>
    <input type="submit" value="Simpan">
</form>
{% endblock content %}